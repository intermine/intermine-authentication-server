<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>User Profile</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/css/bootstrap.css'>
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.16/css/dataTables.bootstrap4.css'>
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css'>
<link rel="stylesheet"  th:href="@{/css/userprofile.css}">
<link rel="stylesheet" th:href="@{/css/customMaterialize.min.css}">
<!-- For registered client list -->
<link rel='stylesheet' href='https://fonts.googleapis.com/icon?family=Material+Icons'>
</head>

<!-- partial:index.partial.html -->
<body class="fixed-nav sticky-footer bg-dark " id="page-top">
  <!-- Navigation-->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top " id="mainNav">
    <a class="navbar-brand" href="/intermine"><img th:src="@{/intermineWhiteLogo.jpg}" width="233" height="28"  /></a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav navbar-sidenav" id="exampleAccordion" >
        <li class="nav-item" data-toggle="tooltip" data-placement="right" title="Dashboard">
          <a class="nav-link" href="#page-top">
            <i class="fa fa-fw fa-dashboard"></i>
            <span class="nav-link-text">Dashboard</span>
          </a>
        </li>
        <li class="nav-item" data-toggle="tooltip" data-placement="right" title="Charts">
          <a class="nav-link" href="#register-client">
            <i class="fa fa-fw fa-area-chart"></i>
            <span class="nav-link-text">Register Client</span>
          </a>
        </li>
        <li class="nav-item" data-toggle="tooltip" data-placement="right" title="Tables">
          <a class="nav-link" href="#registered-clients">
            <i class="fa fa-fw fa-table"></i>
            <span class="nav-link-text">Your Applications</span>
          </a>
        </li>
   <!--     <li class="nav-item" data-toggle="tooltip" data-placement="right" title="Components">
          <a class="nav-link nav-link-collapse collapsed" data-toggle="collapse" href="#collapseComponents" data-parent="#exampleAccordion">
            <i class="fa fa-fw fa-wrench"></i>
            <span class="nav-link-text">Settings</span>
          </a>
          <ul class="sidenav-second-level collapse" id="collapseComponents">
            <li>
              <a href="#">Navbar</a>
            </li>
            <li>
              <a href="#">Cards</a>
            </li>
          </ul>
        </li>   -->
        <li class="nav-item" data-toggle="tooltip" data-placement="right" title="Link">
                 <a class="nav-link" th:href="@{/user/changePassword}">
                   <i class="fa fa-fw fa-wrench"></i>
                   <span class="nav-link-text">Change Password</span>
                 </a>
               </li>
        <li class="nav-item" data-toggle="tooltip" data-placement="right" title="Link">
          <a class="nav-link" href="/intermine/contact">
            <i class="fa fa-fw fa-link"></i>
            <span class="nav-link-text">Contact Us</span>
          </a>
        </li>
      </ul>
      <ul class="navbar-nav sidenav-toggler">
        <li class="nav-item">
          <a class="nav-link text-center" id="sidenavToggler">
            <i class="fa fa-fw fa-angle-left"></i>
          </a>
        </li>
      </ul>
      <ul class="navbar-nav ml-auto">
    <!--    <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle mr-lg-2" id="messagesDropdown" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="fa fa-fw fa-envelope"></i>
            <span class="d-lg-none">Messages
              <span class="badge badge-pill badge-primary">12 New</span>
            </span>
            <span class="indicator text-primary d-none d-lg-block">
              <i class="fa fa-fw fa-circle"></i>
            </span>
          </a>
         <div class="dropdown-menu" aria-labelledby="messagesDropdown">
            <h6 class="dropdown-header">New Tickets:</h6>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">
              <strong>Admin-Ticket#1</strong>
              <span class="small float-right text-muted">11:21 AM</span>
              <div class="dropdown-message small">Hey there! your issue is resolved now.</div>
            </a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">
              <strong>Admin-Ticket#2</strong>
              <span class="small float-right text-muted">11:21 AM</span>
              <div class="dropdown-message small">Can you show us screen shot of errors?</div>
            </a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">
              <strong>Admin-Ticket#3</strong>
              <span class="small float-right text-muted">11:21 AM</span>
              <div class="dropdown-message small">We can't verify your application.</div>
            </a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item small" href="#">View all tickets</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle mr-lg-2" id="alertsDropdown" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="fa fa-fw fa-bell"></i>
            <span class="d-lg-none">Alerts
              <span class="badge badge-pill badge-warning">6 New</span>
            </span>
            <span class="indicator text-warning d-none d-lg-block">
              <i class="fa fa-fw fa-circle"></i>
            </span>
          </a>
         <div class="dropdown-menu" aria-labelledby="alertsDropdown">
            <h6 class="dropdown-header">New Alerts:</h6>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">
              <span class="text-success">
                <strong>
                  <i class="fa fa-long-arrow-up fa-fw"></i>Biotestmine Verified</strong>
              </span>
              <span class="small float-right text-muted">11:21 AM</span>
              <div class="dropdown-message small">Your biotestmine application is verified by team.</div>
            </a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">
                  <span class="text-success">
                            <strong>
                              <i class="fa fa-long-arrow-up fa-fw"></i>Flymine verified</strong>
                          </span>
                          <span class="small float-right text-muted">11:21 AM</span>
                          <div class="dropdown-message small">Your Flymine application is verified by team.</div>
                        </a>
            <div class="dropdown-divider"></div>

            <a class="dropdown-item" href="#">
                          <span class="text-danger">
                            <strong>
                              <i class="fa fa-long-arrow-down fa-fw"></i>Humanmine application verification </strong>
                          </span>
                          <span class="small float-right text-muted">11:21 AM</span>
                          <div class="dropdown-message small">We can't verify your humanmine application. We are unable to access your website.</div>
                        </a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item small" href="#">View all alerts</a>
          </div>
        </li>
        <li class="nav-item">
          <form class="form-inline my-2 my-lg-0 mr-lg-2">
            <div class="input-group">
              <input class="form-control" type="text" placeholder="Search for...">
              <span class="input-group-append">
                <button class="btn btn-primary" type="button">
                  <i class="fa fa-search"></i>
                </button>
              </span>
            </div>
          </form>
        </li>      -->
        <li class="nav-item">
        <div class="navbar-username">
         <i class="fa fa-user" aria-hidden="true"></i> <td th:text="  ${username} + '  | '" ></td>
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-toggle="modal" data-target="#exampleModal">
            <i class="fa fa-fw fa-sign-out"></i>Logout</a>
        </li>
      </ul>
    </div>
  </nav>
  <div class="content-wrapper">
    <div class="container-fluid">
      <!-- Breadcrumbs-->
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="#">Dashboard</a>
        </li>
        <li class="breadcrumb-item active">User Dashboard</li>
      </ol>
      <!-- Area Chart Example-->
<br>
<br>
      <div id="register-client">
                  <i class="fa fa-newspaper-o"></i> <font size="5px">Register Your App  </font></div>
                <hr class="mt-2">
  <div class="container">
          	<ul class="collapsible">
          		<li class="client-list" >
          			<div class="collapsible-header">Register Client
          				<i class="caret material-icons">keyboard_arrow_down</i>
          			</div>
          			<div class="collapsible-body" id="register-client-collapsible">
          			<div class="col-sm-3">
                                              <div class="row">
          			<form th:object="${myForm}" method="POST">
                                    <div class="form-group">
                                        <label for="clientName">Client Name:</label>
                                        <input type="text" class="form-control" id="clientName" autofocus th:field="*{clientName}" required><br/>
                                        <div class="alert alert-danger" th:if="${#fields.hasErrors('clientName')}" th:errors="*{clientName}">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="clientType" >Client Type:</label><br>

                                        <input type="radio" name="clientType" value="webApplication" checked > Web Application<br>
                                        <input type="radio" name="clientType"   value="android"> Android<br>
                                        <input type="radio" name="clientType"   value="iOS"> iOS <br>
                                        <input type="radio" name="clientType" value="other"> other <br>
                                        <div class="alert alert-danger" th:if="${#fields.hasErrors('clientType')}" th:errors="*{clientType}">
                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <label for="websiteUrl">Website Url:</label>
                                        <input type="text" class="form-control" id="websiteUrl" th:field="*{websiteUrl}" required><br/>
                                        <div class="alert alert-danger" th:if="${#fields.hasErrors('websiteUrl')}" th:errors="*{websiteUrl}">
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="registeredRedirectUri">Redirect URIs:</label>
                                        <span class="fa fa-plus add"></span>
                                        <div class="appending_div">
                                            <div>
                                                <input type="text" class="form-control" name="registeredRedirectUri" id="registeredRedirectUri" th:field="*{registeredRedirectUri}" required>

                                            </div>
                                        </div>

                                        <div class="alert alert-danger" th:if="${#fields.hasErrors('registeredRedirectUri')}" th:errors="*{registeredRedirectUri}">
                                        </div>
                                    </div>

                                    <div class="d-flex justify-content-between mb-3">
                                        <div class="p-2"></div>
                                        <div class="p-2"><button type="submit" class="btn btn-info">Register Client</button></div>
                                         <div class="p-2"></div>
                                    </div>
                                </form>
          			</div>
          			</div>
          			</div>
          		</li>

          	</ul>
          </div>
<br>
<br>
          <div id="registered-clients">
            <i class="fa fa-newspaper-o"></i> <font size="5px">Registered Client List </font></div>
          <hr class="mt-2">
          <div class="container">
          	<ul class="collapsible">
          	   <tr th:each="client: ${clientList}">
          		<li class="client-list">
          			<div class="collapsible-header"><td th:text="${client.clientName}"></td>
          				<i class="caret material-icons">keyboard_arrow_down</i>
          			</div>
          			<div class="collapsible-body">
          			<div class="col-sm-3">
                                              <div class="row">
          			<form th:object="${updateClient}" th:action="@{/client/updateClient}" method="POST">

                           <div class="row">
                              <div class="col s6">
                                  <input id="ClientName" type="hidden" class="validate" th:value="${client.clientName}" th:name="ClientName">
                                <label>Website Url: <input value="I am not editable" id="websiteUrl" type="text" class="validate" th:value="${client.websiteUrl}" readonly></label>
                              </div>
                            </div>
                            <br>
                              <div class="row">
                              <div class="col s6">
                                 <label>Client Type: <input value="I am not editable" id="Client_type" type="text" class="validate" th:value="${client.clientType}" readonly></label>
                              </div>
                            </div>
          <br>
                      <span th:if="${client.clientId} != null">
                            <div class="row">
                              <div class="col s12">
                                  <label>Client Id: <input value="I am not editable" id="clientId" type="text" class="validate" th:value="${client.clientId}" readonly></label>

                              </div>
                            </div>
                            <br>
                       </span>


                       <span th:if="${client.clientSecret} != null">
                              <div class="row">
                              <div class="col s12">
                                  <label>Client Secret: <input value="I am not editable" id="Client_secret" type="text" class="validate" th:value="${map.get(client)}" readonly></label>

                              </div>
                            </div>
                      <br>
                      </span>

                              <div class="row">
                              <div class="col s12">
                             <label >Redirect Uri: <input class="validate" id="registeredRedirectUri" th:value="${client.registeredRedirectUri}"  type="text" th:name="registeredRedirectUri"></label>
                              </div>
                            </div>
          <br>
                          <button type="submit" value="Submit" name="update" class="btn btn-success">Update</button>
                        <button type="reset" value="Reset" class="btn btn-warning">Reset</button>
                        <button type="submit" value="Submit" name="delete" class="btn btn-danger">Delete</button>
                          </form>
          			</div>
          			</div>
          			</div>
          		</li>
          		</tr>
          	</ul>
          </div>

      </div>
    </div>
    <!-- /.container-fluid-->
    <!-- /.content-wrapper-->
    <footer class="sticky-footer">
      <div class="container">
        <div class="text-center">
          <small>Copyright © Intermine 2019</small>
        </div>
      </div>
    </footer>
    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
      <i class="fa fa-angle-up"></i>
    </a>
    <!-- Logout Modal-->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <a class="btn btn-primary" th:href="@{/logout}">Logout</a>
          </div>
        </div>
      </div>
    </div>
  </div>

<div>
<div id="myModal" class="modal fade">
	<div class="modal-dialog modal-confirm">
		<div class="modal-content">
			<div class="modal-header">
				<div class="icon-box">
					<i class="material-icons">&#xE876;</i>
				</div>
			</div>
			<div class="modal-body text-center">
				<h4>Success!</h4>
				<p>Thank you for registering your application with Us. Please send an email to support@intermine.org to get your client credentials.</p>
				<button class="btn btn-success" data-dismiss="modal" onclick="testf()"><span>Start Exploring More</span> <i class="material-icons">&#xE5C8;</i></button>
			</div>
		</div>
	</div>
</div>
</div>





</body>
<!-- partial -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.5/umd/popper.js'></script>
<script src='https://cdn.datatables.net/1.10.16/js/jquery.dataTables.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/js/bootstrap.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.16/js/dataTables.bootstrap4.js'></script>
<script type="text/javascript" src="/static/js/userprofile.js" th:src="@{/js/userprofile.js}"></script>
<!--For registered client list-->
<script src='https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js'></script>





<script>
    $(document).ready(function () {
        $('.collapsible').collapsible();
    });

</script>
<style>
    nav {
        background-color: #17a2b8;
    }
     .btn-success{
        background: #5cb85c;;
        }
        .btn-danger{
        background: #d9534f;
        }
        .btn-warning{
        background: #f0ad4e;
        }
</style>
<script >
    function handleEdit() {
        document.getElementById('name').disabled = false;
        document.getElementById('postcode').disabled = false;
        document.getElementById('edit').hidden = false;
        document.getElementById('save').hidden = true;

        return false;
    }
     function testf() {
           location.href='userInfo'
        }
       $(document).ready(function() {
                var i = 1;
                $('.add').on('click', function() {
                    var field = '<br><div><input type="text" class="form-control" name="registeredRedirectUri" id="registeredRedirectUri" th:field="*{registeredRedirectUri}"</div>';
                    $('.appending_div').append(field);
                    i = i+1;
                })
            })
</script>
<script th:inline="javascript">
/*<![CDATA[*/

    var clientRegistered = /*[[${clientRegistered}]]*/ 'default';
    // console.log(message);
    if(clientRegistered){
        // document.getElementById('nobutton').click()
       $('#myModal').modal();
       $('#myModal').modal('open');
    }

    var changepasswordMessage = /*[[${changePasswordMessage}]]*/ 'default';
    if(changepasswordMessage){
       alert("Success! Your Password has been changed!")
    }

    var clientRegistrationError =  /*[[${clientRegistrationError}]]*/ 'default';
    if(clientRegistrationError){
            $('#register-client-collapsible').collapse("toggle");
            window.location.hash="register-client"
    }
/*]]>*/
</script>
</html>